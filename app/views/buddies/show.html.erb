<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap Utility Classes</title>
  <link rel="shortcut icon" href="data:image/x-icon;" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.2/css/all.css">
</head>
<body class="bg-light">
  <div class="border-bottom bg-white">
    <div class="container d-flex align-items-center justify-content-between py-2">
      <h1> ELITE BUDDY</h1>
      <a href="#" class="">Login</a>
    </div>
  </div>
    <div class="container py-3">
      <div class="row">
        <div class="col-md-8">
          <div class="card p-3 mb-3">
            <% if @buddy.photo.attached? %>
              <%= cl_image_tag @buddy.photo.key, class: "rounded-circle img-thumbnail", width: "250px"%>
            <% else %>
              <img src="images/deliveroo.png" alt="" width="140px">
            <% end %>
            <h2><%= @buddy.name %></h2>
            <span><%= @buddy.price_per_day %>€ la journée</span>
          </div>
          
        <div class="card p-3 mb-3">
          <p><strong>DESCRIPTION :</strong></p>
          <p><%= @buddy.description %></p>
          <p><%= @buddy.options %></p>
        </div>

        <div class="card p-3 mb-3">
          <p><strong>Ce que propose ce buddy :</strong></p>
          <p><small>PropositionBuddy</small></p>
        </div>

        <div class="card p-3 mb-3">
          <p><strong>Buddy depuis </strong></p>
          <span>NoteDuBuddy</span>
        </div>

        <div class="card p-3 mb-3">
          <p><strong>Commentaires :</strong></p>
          <p><small>CommentaireBuddy</small></p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="bg-white border p-3 sticky-top">
          <h2>Reservation :</h2>
          <div data-controller="price" data-price-price-value="<%= @buddy.price_per_day %>">
            <%= simple_form_for([@buddy, @booking]) do |f| %>
              <div class="d-flex justify-content-between mt-3">
                <p><strong>Prix Jour</strong></p>
                <p><%= @buddy.price_per_day %> €</p>
              </div>

              <div class="d-flex justify-content-between mt-3">
                <p><strong>Frais déplacement</strong></p>
                <p>À définir</p>
              </div>

              <div class="d-flex justify-content-between mt-3 border-bottom">
                <p><strong>Dates de réservation</strong></p>
                <p>
                  <%= f.input :start_time, as: :string, input_html: { data: { controller: "datepicker", action: "change->price#calculatePrice", price_target: "startTime" } } %>
                  <%= f.input :end_time, as: :string, input_html: { data: { controller: "datepicker", action: "change->price#calculatePrice", price_target: "endTime" } } %>
                </p>
              </div>

              <div class="d-flex justify-content-between mt-3">
                <p><strong>Total Prix</strong></p>
                <p><%= f.input :total_price, readonly: true, input_html: { id: 'booking_total_price', data: { price_target: "priceInput" } } %></p>
              </div>

              <div class="d-flex justify-content-between mt-3">
                <%= f.submit 'Book this Buddy', class: 'btn btn-primary' %>
                <%= link_to "Edit Buddy", edit_buddy_path(@buddy), class: 'btn btn-secondary' %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>
